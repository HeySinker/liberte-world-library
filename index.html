<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bibliotheca Mundi Liberi</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%230a0e14' stroke='%2300ff00' stroke-width='2'/%3E%3Cpath d='M35 45 Q35 35 50 35 Q65 35 65 45' fill='none' stroke='%2300ff00' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='40' cy='45' r='3' fill='%2300ff00'/%3E%3Ccircle cx='60' cy='45' r='3' fill='%2300ff00'/%3E%3Cpath d='M30 60 L70 60' stroke='%2300ff00' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M50 25 L50 15 M40 28 L35 20 M60 28 L65 20' stroke='%2300ff00' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M25 70 Q50 80 75 70' fill='none' stroke='%2300ff00' stroke-width='2'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="global.css">
</head>

<body>
    <!-- Matrix Background -->
    <canvas id="matrixCanvas"></canvas>

    <!-- عداد الزوار الحاليين -->
    <div class="visitor-counter">
        <div class="visitor-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        </div>
        <div class="visitor-text">
            <div class="visitor-label">Online Now</div>
            <div class="visitor-count" id="visitorCount">---</div>
        </div>
    </div>

    <div class="container">
        <header class="header">
            <h1>Bibliotheca Mundi Liberi</h1>
            <p>مكتبة العالم الحرّ</p>
            <p class="subtitle">The Archive of Rare & Precious Books</p>
            <div class="stats-container" id="statsCounter">Scanning collections...</div>

            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search by book title or category..."
                    autocomplete="off">
                <span class="search-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </span>
            </div>

            <div class="link-section">
                <p>
                    <span class="icon-inline">
                        <svg viewBox="0 0 24 24" fill="currentColor" stroke="none">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-1.85.63-3.55 1.69-4.9l5.66 5.66c.39.39.39 1.02 0 1.41-.39.39-1.02.39-1.41 0L4.9 9.14C6.26 6.94 8.96 5.5 12 5.5c3.87 0 7.13 2.74 7.88 6.38l-2.15-.72c-.47-.16-1-.16-1.46 0l-2.83.94c-.47.16-.84.53-1 1-.16.47-.16 1 0 1.46l.94 2.83c.16.47.53.84 1 1 .47.16 1 .16 1.46 0l.72-2.15C17.26 17.13 14.87 18.5 12 18.5z" />
                            <circle cx="12" cy="12" r="3" fill="#0a0e14" />
                        </svg>
                        Backup Access:
                    </span>
                    <a href="http://7xk4m9p2qw8n5vt3bg6hj1rz0cd8efy4ua9slx2qi7nwmkopdvh3elad.onion/library"
                        style="color: #00ff00;">Tor Mirror</a>
                </p>
            </div>

            <div class="link-section">
                <p>
                    <span>Support (SOL):</span>
                    <span class="copy-link" id="copySolBtn">SamJzu73QqdE2Htv7mmn9MUDALypWRoR2H51qon5R9F</span>
                </p>
            </div>

            <div class="link-section">
                <p>
                    <span>Support (BTC):</span>
                    <span class="copy-link" id="copyBtcBtn">1SamUEdkg5qkNPojCuvepTUMjSvp4WiUN</span>
                </p>
            </div>
        </header>

        <div class="breadcrumb-container">
            <div class="breadcrumb" id="breadcrumb"></div>
        </div>

        <div class="category-title" id="categoryTitle" style="display: none;">
            <h2 id="categoryName"></h2>
            <p id="categoryCount"></p>
        </div>

        <main>
            <div id="booksGrid" class="books-grid">
                <div class="loading-text">Loading collections from central server...</div>
            </div>
            <div id="loadMoreTrigger" style="height: 20px;"></div>
        </main>
        <script src="/script.js"></script>

        <footer
            style="text-align: center; margin-top: 50px; padding: 20px; border-top: 1px solid #2a3f5f; color: #4a5568;">
            <p>&copy; 2026 Liber Mundi - Knowledge for All | Scientia est potentia</p>
        </footer>
    </div>

    <!-- Matrix Rain Script -->
    <script>
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas to full window size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Runic characters (Elder Futhark + modern additions)
        const runicChars = 'ᚠᚡᚢᚣᚤᚥᚦᚧᚨᚩᚪᚫᚬᚭᚮᚯᚰᚱᚲᚳᚴᚵᚶᚷᚸᚹᚺᚻᚼᚽᚾᚿᛀᛁᛂᛃᛄᛅᛆᛇᛈᛉᛊᛋᛌᛍᛎᛏᛐᛑᛒᛓᛔᛕᛖᛗᛘᛙᛚᛛᛜᛝᛞᛟᛠᛡᛢᛣᛤᛥᛦᛧᛨᛩᛪ᛫᛬᛭ᛮᛯᛰ';

        const fontSize = 26;
        const columns = Math.floor(canvas.width / fontSize);
        const rows = Math.floor(canvas.height / fontSize);

        // Store grid of characters
        const grid = [];

        // Initialize grid with random characters
        for (let y = 0; y < rows; y++) {
            grid[y] = [];
            for (let x = 0; x < columns; x++) {
                grid[y][x] = runicChars[Math.floor(Math.random() * runicChars.length)];
            }
        }

        // Track glow position for each column (raindrops)
        const glowDrops = [];
        const glowSpeeds = [];

        // Initialize glow drops
        for (let x = 0; x < columns; x++) {
            glowDrops[x] = Math.random() * -10;
            glowSpeeds[x] = 0.05 + Math.random() * 0.1; // Faster speeds
        }

        function draw() {
            // Clear canvas completely with dark background
            ctx.fillStyle = 'rgba(10, 14, 20, 1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Set font
            ctx.font = fontSize + 'px monospace';

            // Draw all characters
            for (let y = 0; y < rows; y++) {
                for (let x = 0; x < columns; x++) {
                    const posX = x * fontSize;
                    const posY = (y + 1) * fontSize;
                    const char = grid[y][x];

                    // Base dimmed character
                    ctx.shadowBlur = 0;
                    ctx.fillStyle = 'rgba(0, 100, 0, 0.3)';
                    ctx.fillText(char, posX, posY);

                    // Check if glow raindrop is on this character
                    const glowY = glowDrops[x];
                    if (y >= glowY - 2 && y <= glowY + 2) {
                        // Calculate intensity based on distance from center
                        let intensity = 1 - Math.abs(y - glowY) / 3;
                        intensity = Math.max(0, intensity);

                        // Glow effect
                        ctx.shadowColor = `rgba(0, 255, 0, ${intensity})`;
                        ctx.shadowBlur = 20;

                        // Bright character
                        ctx.fillStyle = `rgba(0, 255, 0, ${intensity})`;
                        ctx.fillText(char, posX, posY);
                    }
                }
            }

            // Update glow drops (like raindrops falling)
            for (let x = 0; x < columns; x++) {
                glowDrops[x] += glowSpeeds[x];

                // Reset drop to top when it goes off screen
                if (glowDrops[x] > rows + 2) {
                    glowDrops[x] = -5;
                    glowSpeeds[x] = 0.05 + Math.random() * 0.1;
                }
            }

            // Occasionally change some characters
            if (Math.random() > 0.98) {
                const randomY = Math.floor(Math.random() * rows);
                const randomX = Math.floor(Math.random() * columns);
                grid[randomY][randomX] = runicChars[Math.floor(Math.random() * runicChars.length)];
            }
        }

        // Run the animation (faster frame rate)
        setInterval(draw, 16);

        // Resize canvas on window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // Reinitialize grid
            const newColumns = Math.floor(canvas.width / fontSize);
            const newRows = Math.floor(canvas.height / fontSize);

            for (let y = 0; y < newRows; y++) {
                if (!grid[y]) {
                    grid[y] = [];
                }
                for (let x = 0; x < newColumns; x++) {
                    if (!grid[y][x]) {
                        grid[y][x] = runicChars[Math.floor(Math.random() * runicChars.length)];
                    }
                }
            }

            // Update glow drops if width changed
            while (glowDrops.length < newColumns) {
                glowDrops.push(Math.random() * -10);
                glowSpeeds.push(0.5 + Math.random() * 0.5);
            }
            while (glowDrops.length > newColumns) {
                glowDrops.pop();
                glowSpeeds.pop();
            }
        });
    </script>
</body>



</html>

